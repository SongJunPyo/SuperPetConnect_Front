● columns 테이블의 데이터베이스 구조 변경에 따른 서버 코드 수정이 완료되었습니다. 모든 변경 사항이 적용되었으며, 프론트엔드 팀에서 참고할 API 문서를 제공합니다.

  프론트엔드팀 전달사항 - Columns API 업데이트

  주요 변경사항

  - 테이블명: hospital_columns → columns
  - 필드명: author_account_idx → hospital_idx (병원 ID로 변경)
  - 필드명: is_published → columns_active (활성화 상태)
  - 인증방식: 병원 계정 기반으로 변경

  API 엔드포인트

  1. 병원 칼럼 작성

  POST /api/hospital/columns
  Authorization: Bearer {hospital_jwt_token}
  Content-Type: application/json

  {
      "title": "칼럼 제목",
      "content": "칼럼 내용",
      "columns_active": true
  }

  2. 병원 칼럼 목록 조회 (활성화된 칼럼)

  GET /api/hospital/columns?page=1&page_size=10&search=검색어&hospital_idx=1&columns_active=true

  3. 내가 작성한 칼럼 목록 조회

  GET /api/hospital/columns/my?page=1&page_size=10&columns_active=true
  Authorization: Bearer {hospital_jwt_token}

  4. 특정 칼럼 상세 조회 (조회수 자동 증가)

  GET /api/hospital/columns/{column_idx}

  5. 칼럼 수정

  PUT /api/hospital/columns/{column_idx}
  Authorization: Bearer {hospital_jwt_token}
  Content-Type: application/json

  {
      "title": "수정된 제목",
      "content": "수정된 내용",
      "columns_active": false
  }

  6. 칼럼 삭제

  DELETE /api/hospital/columns/{column_idx}
  Authorization: Bearer {hospital_jwt_token}

  7. 칼럼 활성화/비활성화 토글

  PATCH /api/hospital/columns/{column_idx}/toggle
  Authorization: Bearer {hospital_jwt_token}

  8. 공개 칼럼 조회 (로그인 불필요)

  GET /api/hospital/public/columns?page=1&page_size=10&search=검색어

  9. 인기 칼럼 조회 (조회수 기준)

  GET /api/hospital/popular/columns?page=1&page_size=10&days=7

  응답 데이터 구조

  {
      "column_idx": 1,
      "hospital_idx": 2,
      "hospital_name": "서울동물병원",
      "hospital_code": "1234567890",
      "title": "반려동물 헌혈의 중요성",
      "content": "칼럼 전체 내용...",
      "content_preview": "칼럼 미리보기...",
      "columns_active": true,
      "view_count": 150,
      "created_at": "2024-01-15T10:30:00",
      "updated_at": "2024-01-15T14:20:00"
  }

  중요 참고사항

  1. 인증: 병원 계정 JWT 토큰 필요 (일부 공개 API 제외)
  2. 권한: 병원은 자신이 작성한 칼럼만 수정/삭제 가능
  3. 활성화: columns_active=true인 칼럼만 공개 조회 가능
  4. 조회수: 상세 조회 시 자동으로 조회수 증가
  5. 검색: 제목, 내용, 병원명으로 검색 가능