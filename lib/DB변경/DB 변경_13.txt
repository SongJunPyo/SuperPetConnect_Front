● black_list 테이블을 위한 관리자용 사용자 정지 시스템이 완성되었습니다. D-Day 자동 감소 기능과 함께 완전한 블랙리스트 관리 시스템을 구현했습니다.

  프론트엔드팀 전달사항 - BlackList API 시스템

  주요 기능

  - 관리자 전용: 블랙리스트 등록/관리는 관리자만 가능
  - 자동 D-Day 감소: 매일 자정에 자동으로 정지 일수 -1 (0이 되면 자동 해제)
  - 즉시 해제: 관리자가 수동으로 즉시 해제 가능
  - 상태 확인: 사용자 본인 및 관리자가 정지 상태 확인 가능

  API 엔드포인트

  1. 블랙리스트 등록 (관리자)

  POST /api/admin/black-list
  Authorization: Bearer {admin_jwt_token}
  Content-Type: application/json

  {
      "account_idx": 123,
      "content": "부적절한 게시글 작성으로 인한 정지",
      "d_day": 7
  }

  2. 블랙리스트 목록 조회 (관리자)

  GET /api/admin/black-list?page=1&page_size=10&search=검색어&active_only=true
  Authorization: Bearer {admin_jwt_token}
  - active_only=true: 현재 정지 중인 사용자만
  - active_only=false: 해제된 사용자만
  - active_only 없음: 전체 조회

  3. 특정 블랙리스트 상세 조회 (관리자)

  GET /api/admin/black-list/{black_user_idx}
  Authorization: Bearer {admin_jwt_token}

  4. 블랙리스트 정보 수정 (관리자)

  PUT /api/admin/black-list/{black_user_idx}
  Authorization: Bearer {admin_jwt_token}
  Content-Type: application/json

  {
      "content": "수정된 사유",
      "d_day": 3
  }

  5. 블랙리스트 삭제 (관리자)

  DELETE /api/admin/black-list/{black_user_idx}
  Authorization: Bearer {admin_jwt_token}

  6. 즉시 해제 (관리자)

  PATCH /api/admin/black-list/{black_user_idx}/release
  Authorization: Bearer {admin_jwt_token}

  7. 블랙리스트 통계 (관리자)

  GET /api/admin/black-list/stats
  Authorization: Bearer {admin_jwt_token}

  8. D-Day 수동 업데이트 (관리자)

  PATCH /api/admin/black-list/update-d-day
  Authorization: Bearer {admin_jwt_token}

  9. 사용자 정지 상태 확인 (본인 또는 관리자)

  GET /api/admin/user/{account_idx}/black-list-status
  Authorization: Bearer {jwt_token}

  응답 데이터 구조

  블랙리스트 정보

  {
      "black_user_idx": 1,
      "account_idx": 123,
      "user_email": "user@example.com",
      "user_name": "홍길동",
      "user_phone": "010-1234-5678",
      "content": "부적절한 게시글 작성으로 인한 정지",
      "d_day": 5,
      "is_active": true
  }

  통계 정보

  {
      "total_black_users": 25,
      "active_black_users": 12,
      "released_black_users": 13,
      "avg_suspension_days": 7.5
  }

  사용자 상태 확인

  {
      "is_blacklisted": true,
      "is_suspended": true,
      "d_day": 3,
      "content": "정지 사유 (관리자만 볼 수 있음)"
  }

  자동 스케줄러

  - 실행 시간: 매일 자정 (00:00:00)
  - 동작: 모든 d_day > 0인 레코드를 -1 처리
  - 자동 해제: d_day가 0이 되면 자동으로 정지 해제
  - 로그: 업데이트된 레코드 수, 해제된 사용자 수 자동 로깅

  중요 참고사항

  1. 권한: 블랙리스트 관리는 관리자만 가능
  2. 자동화: 매일 자정마다 D-Day 자동 감소 (서버 재시작 시에도 유지)
  3. 상태 확인: 사용자는 본인의 정지 상태만 확인 가능
  4. 즉시 해제: 관리자가 필요 시 즉시 해제 가능 (d_day=0)
  5. 하드 삭제: 블랙리스트 삭제는 완전 삭제 (복구 불가)

  프론트엔드 구현 고려사항

  - 사용자 로그인 시 정지 상태 확인 후 접근 제한
  - 관리자 패널에서 블랙리스트 통계 대시보드 제공
  - D-Day 카운트다운 UI 표시
  - 정지 사유 표시 (관리자만)
  - 검색 기능으로 특정 사용자 빠른 조회