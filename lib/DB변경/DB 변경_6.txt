  ğŸ“± í”„ë¡ íŠ¸ì—”ë“œ API ë³€ê²½ì‚¬í•­

  ğŸ”¥ ì¤‘ìš”: í—Œí˜ˆ ë‚ ì§œ ê´€ë¦¬ ê¸°ëŠ¥ ì¶”ê°€!

  í…Œì´ë¸” êµ¬ì¡°:
  donation_post_dates:
  - post_dates_id (PK)    # ë‚ ì§œ ID
  - post_idx (FK)         # ê²Œì‹œê¸€ ID
  - donation_date         # í—Œí˜ˆ ì˜ˆì • ë‚ ì§œ

  1. ë‹¨ì¼ í—Œí˜ˆ ë‚ ì§œ ì¶”ê°€ API (POST /api/donation-dates/)

  ìš”ì²­:
  {
    "post_idx": 1,
    "donation_date": "2024-03-15T09:00:00"
  }

  ì‘ë‹µ:
  {
    "post_dates_id": 1,
    "post_idx": 1,
    "donation_date": "2024-03-15T09:00:00"
  }

  2. ì—¬ëŸ¬ í—Œí˜ˆ ë‚ ì§œ í•œë²ˆì— ì¶”ê°€ API (POST /api/donation-dates/bulk) âœ¨

  ìš”ì²­:
  {
    "post_idx": 1,
    "donation_dates": [
      "2024-03-15T09:00:00",
      "2024-03-16T14:00:00",
      "2024-03-17T10:00:00"
    ]
  }

  ì‘ë‹µ:
  {
    "message": "3ê°œì˜ í—Œí˜ˆ ë‚ ì§œê°€ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.",
    "post_idx": 1,
    "created_dates": [
      {
        "post_dates_id": 1,
        "post_idx": 1,
        "donation_date": "2024-03-15T09:00:00"
      },
      {
        "post_dates_id": 2,
        "post_idx": 1,
        "donation_date": "2024-03-16T14:00:00"
      },
      {
        "post_dates_id": 3,
        "post_idx": 1,
        "donation_date": "2024-03-17T10:00:00"
      }
    ]
  }

  3. íŠ¹ì • ê²Œì‹œê¸€ì˜ í—Œí˜ˆ ë‚ ì§œ ì¡°íšŒ API (GET /api/donation-dates/post/{post_idx})

  ì‘ë‹µ:
  [
    {
      "post_dates_id": 1,
      "post_idx": 1,
      "donation_date": "2024-03-15T09:00:00"
    },
    {
      "post_dates_id": 2,
      "post_idx": 1,
      "donation_date": "2024-03-16T14:00:00"
    }
  ]

  4. í—Œí˜ˆ ë‚ ì§œ ìˆ˜ì • API (PUT /api/donation-dates/{post_dates_id})

  ìš”ì²­:
  {
    "donation_date": "2024-03-20T11:00:00"
  }

  5. í—Œí˜ˆ ë‚ ì§œ ì‚­ì œ API (DELETE /api/donation-dates/{post_dates_id})

  ì‘ë‹µ:
  {
    "message": "í—Œí˜ˆ ë‚ ì§œê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤."
  }

  ğŸ’» í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„ ê°€ì´ë“œ

  1. í—Œí˜ˆ ê²Œì‹œê¸€ ì‘ì„± ì‹œ ë‚ ì§œ ì¶”ê°€

  const handleCreatePost = async (postData) => {
    // 1. ê²Œì‹œê¸€ ë¨¼ì € ìƒì„±
    const postResponse = await fetch('/api/donation-posts/', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(postData)
    });

    const post = await postResponse.json();

    // 2. í—Œí˜ˆ ë‚ ì§œë“¤ ì¶”ê°€
    if (selectedDates.length > 0) {
      const datesResponse = await fetch('/api/donation-dates/bulk', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          post_idx: post.post_idx,
          donation_dates: selectedDates.map(date => date.toISOString())
        })
      });
    }
  };

  2. í—Œí˜ˆ ë‚ ì§œ í‘œì‹œ

  const renderDonationDates = (postIdx) => {
    const [dates, setDates] = useState([]);

    useEffect(() => {
      fetchDonationDates(postIdx);
    }, [postIdx]);

    const fetchDonationDates = async (postIdx) => {
      const response = await fetch(`/api/donation-dates/post/${postIdx}`);
      const datesData = await response.json();
      setDates(datesData);
    };

    return (
      <div>
        <h4>í—Œí˜ˆ ì˜ˆì • ë‚ ì§œ</h4>
        {dates.map(dateObj => (
          <div key={dateObj.post_dates_id}>
            ğŸ“… {new Date(dateObj.donation_date).toLocaleString()}
            <button onClick={() => deleteDonationDate(dateObj.post_dates_id)}>
              ì‚­ì œ
            </button>
          </div>
        ))}
      </div>
    );
  };

  3. ë‚ ì§œ ê´€ë¦¬ (ì¶”ê°€/ìˆ˜ì •/ì‚­ì œ)

  // ë‚ ì§œ ì¶”ê°€
  const addDonationDate = async (postIdx, donationDate) => {
    const response = await fetch('/api/donation-dates/', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        post_idx: postIdx,
        donation_date: donationDate.toISOString()
      })
    });

    if (response.ok) {
      fetchDonationDates(postIdx); // ëª©ë¡ ìƒˆë¡œê³ ì¹¨
    }
  };

  // ë‚ ì§œ ìˆ˜ì •
  const updateDonationDate = async (postDatesId, newDate) => {
    const response = await fetch(`/api/donation-dates/${postDatesId}`, {
      method: 'PUT',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        donation_date: newDate.toISOString()
      })
    });
  };

  // ë‚ ì§œ ì‚­ì œ
  const deleteDonationDate = async (postDatesId) => {
    const response = await fetch(`/api/donation-dates/${postDatesId}`, {
      method: 'DELETE'
    });

    if (response.ok) {
      // ëª©ë¡ì—ì„œ ì œê±°
      setDates(dates.filter(d => d.post_dates_id !== postDatesId));
    }
  };

  4. ë‹¬ë ¥ ì»´í¬ë„ŒíŠ¸ ì—°ë™

  const DonationCalendar = ({ postIdx }) => {
    const [selectedDates, setSelectedDates] = useState([]);

    const handleDateSelect = (date) => {
      setSelectedDates([...selectedDates, date]);
    };

    const handleSaveDates = async () => {
      await fetch('/api/donation-dates/bulk', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          post_idx: postIdx,
          donation_dates: selectedDates.map(date => date.toISOString())
        })
      });
    };

    return (
      <div>
        <Calendar 
          onDateSelect={handleDateSelect}
          selectedDates={selectedDates}
        />
        <button onClick={handleSaveDates}>ë‚ ì§œ ì €ì¥</button>
      </div>
    );
  };

  ğŸ¯ í•µì‹¬ ê¸°ëŠ¥

  1. ë‹¤ì¤‘ ë‚ ì§œ ê´€ë¦¬: í•˜ë‚˜ì˜ ê²Œì‹œê¸€ì— ì—¬ëŸ¬ í—Œí˜ˆ ë‚ ì§œ ì„¤ì • ê°€ëŠ¥
  2. ì‹¤ì‹œê°„ CRUD: ë‚ ì§œ ì¶”ê°€/ìˆ˜ì •/ì‚­ì œ ì¦‰ì‹œ ë°˜ì˜
  3. ë²Œí¬ ì‘ì—…: ì—¬ëŸ¬ ë‚ ì§œë¥¼ í•œ ë²ˆì— ì¶”ê°€ ê°€ëŠ¥
  4. ê¶Œí•œ ì œì–´: ë³‘ì› ê³„ì •ë§Œ ë‚ ì§œ ê´€ë¦¬ ê°€ëŠ¥
  5. ì •ë ¬: ë‚ ì§œìˆœìœ¼ë¡œ ìë™ ì •ë ¬